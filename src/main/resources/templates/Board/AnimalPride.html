<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>ë°˜ë ¤ë™ë¬¼ ìë‘ ê²Œì‹œíŒ</title>
	<link rel="stylesheet" th:href="@{/CSS/header.css}">
	<style>
		.container-all {
			width: 78%;
			margin: 40px auto;
			position: relative;
			background-color: #fff;
			padding: 15px 0px;
			box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
			border-radius: 6px;
		}

		/*ë¶ìª½ ì»¨í…Œì´ë„ˆ*/
		/*============================================================================*/

		/*==== í˜„ì¬ ê²Œì‹œíŒ ì •ë³´ ====*/
		.board-header {
			text-align: center;
			/* í…ìŠ¤íŠ¸ ê°€ìš´ë° ì •ë ¬ */
			margin-bottom: 5px;
			/* ì•„ë˜ ì—¬ë°± */
		}

		.board-header h1 {
			margin: 0;
			font-size: 35px;
			/* í•„ìš” ì‹œ í¬ê¸° ì¡°ì ˆ */
			margin-top: 15px;
			text-align: left;
			width: 90%;
			/* ì¸ê¸°ê¸€ ì˜ì—­ê³¼ ë™ì¼ */
			margin: 20px auto 20px auto;
			/* ì¢Œìš° ì¤‘ì•™ ì •ë ¬ */

		}

		.board-header p {
			font-size: 17px;
			color: #555;
			width: 90%;
			text-align: left;
			/* ì¸ê¸°ê¸€ ì˜ì—­ê³¼ ë™ì¼ */
			margin: 20px auto 0px auto;
			/* ì¢Œìš° ì¤‘ì•™ ì •ë ¬ */

		}

		/*=== ìœ—ë‹¨ì˜ í•œì¤„ ì •ë ¬ìš© wrapper ===*/
		.action-row {
			display: flex;
			grid-template-columns: 1fr auto;
			/* ì™¼ìª½(ê²€ìƒ‰ì°½) / ì˜¤ë¥¸ìª½(ë²„íŠ¼ë“¤) */
			align-items: center;
			width: 90%;
			max-width: 1600px;
			margin: 0 auto 0px;
			margin-top: 0;
			padding: 0 0px;
			box-sizing: border-box;
			gap: 20px;
			/* ì¤„ë°”ê¿ˆ ì‹œ ê°„ê²© */
		}

		/*=== ê²€ìƒ‰ ì„¹ì…˜ ===*/
		.center-section {
			flex: 1;
			display: flex;
			justify-content: center;
			/* ê°€ìš´ë° ì •ë ¬ */
			align-items: center;
			margin-left: 320px;
			width: 100%;
			min-width: 100px;
			/* ìµœì†Œ ë„ˆë¹„ ì§€ì •, í•„ìš”ì‹œ ì¡°ì ˆ */
			order: 1
		}

		/*====  ì˜¤ë¥¸ìª½ ì„¹ì…˜ ====*/
		.right-section {
			display: flex;
			justify-content: flex-end;
			/* ë˜ëŠ” ì›í•˜ëŠ” ì •ë ¬ */
			align-items: center;
			flex: 0 0 auto;
			/* ë‚´ìš© í¬ê¸°ë§Œí¼ */
			gap: 5px;
			/* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
			max-width: 1000px;
			min-width: 0px;
			/* ìµœì†Œ ë„ˆë¹„ ì§€ì • */
			order: 2;
		}

		/*=== ì¸ê¸°ê¸€ ì ‘ê¸° ì„¹ì…˜ ===*/
		.popular-section {
			display: flex;
			justify-content: flex-end;
			width: 90%;
			margin: 0 auto;
		}

		/*==== ì ‘ì—ˆì„ë•Œ ====*/
		@media (max-width: 900px) {
			.action-row {
				flex-direction: column;
				/* ì„¸ë¡œ ë°©í–¥ ì •ë ¬ */
				align-items: stretch;
			}


			.center-section {
				justify-content: center;
				order: 1;
			}

			.right-section {
				justify-content: center;
				gap: 5px;
				order: 2;
			}

			.popular-section {
				justify-content: center;
			}
		}

		/* ====== ê²€ìƒ‰ë°•ìŠ¤ ====== */
		/*ê²€ìƒ‰ë°•ìŠ¤ í¼*/
		.search-box {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 100%;
			flex-grow: 1;
			/* ê°€ë¡œê³µê°„ ìµœëŒ€í•œ í™œìš© */
			max-width: 600px;
			/* ê²€ìƒ‰ì°½ ì „ì²´ ìµœëŒ€ ë„“ì´ */
			margin: 0 auto;
		}

		/*ê²€ìƒ‰ ì…ë ¥ì°½ ë° ì„ íƒ ë°•ìŠ¤*/
		.search-input {
			padding: 8px 10px;
			font-size: 14px;
			border: 1px solid #ccc;
			border-radius: 4px;
			transition: border-color 0.3s ease;
			width: 100%;
			min-width: 120px;
			max-width: 600px;
			/* ë„ˆë¬´ ì‘ì•„ì§€ëŠ” ê²ƒ ë°©ì§€ */
			box-sizing: border-box;
		}

		.search-select {
			padding: 8px 10px;
			font-size: 14px;
			border: 1px solid #ccc;
			border-radius: 4px;
			transition: border-color 0.3s ease;
			width: 120px;
		}

		.search-input:focus,
		.search-select:focus {
			outline: none;
			border-color: #8b5e3c;
		}

		.search-button {
			display: flex;
			justify-content: center;
			align-items: center;
			width: 100%;
			flex-grow: 1;
			/* ê°€ëŠ¥í•œ ê³µê°„ ë‹¤ ì°¨ì§€ */
			margin: 20px 0;
			/* ìœ„ì•„ë˜ ë§ˆì§„ */
			gap: 6px;
			/* ì„ íƒë°•ìŠ¤-ì…ë ¥ì°½-ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
		}

		/*--ê²€ìƒ‰ ë²„íŠ¼--*/
		.btn-search {
			padding: 8px 18px;
			font-size: 14px;
			cursor: pointer;
			background-color: #8b5e3c;
			color: white;
			border: none;
			border-radius: 4px;
			font-weight: 600;
			box-shadow: 0 2px 5px rgba(139, 94, 60, 0.4);
			transition: background-color 0.3s ease;
			white-space: nowrap;
		}

		.btn-search:hover {
			background-color: #8b5e3c;
			box-shadow: 0 4px 8px rgba(139, 94, 60, 0.6);
		}


		/* --- ë³´ê¸° ë°©ì‹ì „í™˜ --- */
		.toggle-switch {
			display: flex;
			border: 1px solid #8b5e3c;
			border-radius: 8px;
			overflow: hidden;
			cursor: pointer;
			user-select: none;
			font-weight: 600;
			font-size: 16px;
			color: #8b5e3c;
			background: white;
			margin-right: 20px;
			min-width: 145px;
			/* ìµœì†Œ ë„ˆë¹„ ì§€ì •: ë„ˆë¬´ ì‘ì•„ì§€ëŠ” ê²ƒ ë°©ì§€ */
		}

		.toggle-switch input[type="radio"] {
			display: none;
			/* ê¸°ë³¸ ë¼ë””ì˜¤ ìˆ¨ê¸°ê¸° */
		}

		.toggle-switch label {
			padding: 8px 10px;
			/*ì„¸ë¡œ, ê°€ë¡œ*/
			transition: background-color 0.3s, color 0.3s;
			user-select: none;
			text-align: center;
			flex: 1;
			/* ê· ë“± í­ */
			white-space: nowrap;
		}

		.toggle-switch label:hover {
			background-color: #f0e8db;
		}

		.toggle-switch input[type="radio"]:checked+label {
			background-color: #8b5e3c;
			color: white;
		}

		/*== ê¸€ ë“±ë¡ ë²„íŠ¼==*/
		.regist-button {
			/* ìœ„ì¹˜ ì¡°ì • í•„ìš”í•˜ë©´ margin-left ë“±ìœ¼ë¡œ ì¡°ì ˆ */
			text-align: right;
			width: 100%;
			margin-right: 0px;
			white-space: nowrap;
			margin-top: 0;
			/* ë²„íŠ¼ ì¤„ë°”ê¿ˆ ë°©ì§€ */
		}

		/* ê¸€ ë“±ë¡ ë²„íŠ¼  */
		.btn-primary {
			display: inline-block;
			padding: 8px 16px;
			background-color: #8b5e3c;
			color: white;
			border-radius: 4px;
			font-weight: 600;
			text-decoration: none;
			transition: background-color 0.3s ease;
			box-shadow: 0 2px 5px rgba(139, 94, 60, 0.4);
		}

		.btn-primary:hover {
			background-color: #8b5e3c;
			box-shadow: 0 4px 8px rgba(139, 94, 60, 0.6);
		}



		/*=== ì ‘ê¸°ë²„íŠ¼ ===*/
		#togglePopularBtn {
			padding: 8px 16px;
			background-color: #8b5e3c;
			color: white;
			border: none;
			border-radius: 4px;
			font-weight: 600;
			font-size: 13px;
			cursor: pointer;
			transition: background-color 0.3s ease;
			box-shadow: 0 2px 5px rgba(139, 94, 60, 0.4);
			white-space: nowrap;
			margin-bottom: 5px;
		}

		#togglePopularBtn:hover {
			background-color: #8b5e3c;
			box-shadow: 0 4px 8px rgba(139, 94, 60, 0.6);
		}



		/*ì¸ê¸°, ì „ì²´ê¸€ ë¶„ë‹¨ì„ */
		/*================================================================================*/

		.main-wrapper {
			width: 92%;
			margin: 0 auto 80px auto;
			position: relative;
			background-color: #fff;
			padding: 10px 0px;
			box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
			border-radius: 6px;
		}

		/*=== ì¸ê¸°ê¸€ íƒ€ì´í‹€ ===*/
		.popular-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 15px;
			/* toggle-switch ê¸°ë³¸ ìŠ¤íƒ€ì¼ ê·¸ëŒ€ë¡œ ë‘  */
		}

		.here {
			display: flex;
			flex-wrap: wrap;
			gap: 20px;
			justify-content: center;
		}

		.popular-wrapper {
			width: 85%;
			margin: 20px auto;
			position: relative;
			background-color: #fff;
			padding: 15px 0px;
			box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
			border-radius: 6px;
		}

		/* ====== ì¸ê¸°ê¸€ ì˜ì—­ ====== */
		.card-popular {
			width: 300px;
			border: 1px solid #ddd;
			border-radius: 10px;
			overflow: hidden;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
			padding: 10px;
			background: #fff;
		}

		/* ì¸ê¸°ê¸€ ì¸ë„¤ì¼ ì¡°ì •*/
		.thumb-image {
			width: 300px;
			height: 240px;
			object-fit: cover;
			border-radius: 10px;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
		}

		.card-popular strong {
			font-size: 18px;
			display: block;
			margin-bottom: 5px;
		}

		.card-popular span {
			display: block;
			font-size: 14px;
			color: #555;
			margin-bottom: 3px;
		}


		/* ====ë³¸ë¬¸ ë³´ê¸°í˜•ì‹ ì§€ì • ====*/
		.card-list-view {
			display: flex;
			flex-wrap: wrap;
			gap: 20px;
			margin-top: 20px;
			justify-content: center;
		}



		/* ====== ë³¸ë¬¸ í…Œì´ë¸” ====== */
		.table-posts {
			border-collapse: collapse;
			width: 100%;
			margin-top: 0px;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			font-size: 14px;
		}

		.table-posts th {
			background-color: #f8f9fb;
			color: #333;
			font-weight: 700;
			padding: 12px 10px;
			border-bottom: 2px solid #ddd;
		}

		.table-posts td {
			border: 1px solid #ddd;
			padding: 10px 8px;
			text-align: center;
			color: #555;
		}

		/*ì „ì²´ ê¸€ ì„¹ì…˜*/
		/*======================================================================================*/
		/*ì „ì²´ ê¸€ wrapper*/
		.main-container {
			width: 92%;
			max-width: auto;
			margin: 0 auto;
			/* ê°€ìš´ë° ì •ë ¬ */
		}

		/*ì „ì²´ê¸€ ìœ„ì¹˜ì¡°ì •ìš© */
		.main-title {
			margin: 0;
			margin: 50px;
			margin-bottom: 5px;
			font-size: 20px;
			max-width: 800px;
			text-align: left;
			padding-left: 0px;
		}

		/* ====== ë§í¬ ====== */
		/* ì¼ë°˜ ë³¸ë¬¸ ë§í¬ */
		.link-default {
			color: #8b5e3c;
			text-decoration: none;
			transition: color 0.3s ease;
		}

		.link-default:hover {
			text-decoration: underline;
			color: #8b5e3c;
		}

		/* ì¹´ë“œ ì œëª©, ê°•ì¡° í…ìŠ¤íŠ¸ ë§í¬ */
		.link-title {
			font-weight: bold;
			font-size: 18px;
			color: #8b5e3c;
			text-decoration: none;
			transition: color 0.3s ease;
		}

		.link-title:hover {
			text-decoration: underline;
			color: #8b5e3c;
		}

		/* ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ í•­ëª© ìŠ¤íƒ€ì¼ */
		.card-list-item {
			border: 1px solid #ddd;
			padding: 15px;
			margin-bottom: 15px;
			border-radius: 8px;
			background: #fff;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
		}

		.card-list-item img.thumb-image {
			width: 180px;
			height: 130px;
			object-fit: cover;
			border-radius: 10px;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
			display: block;
			margin-bottom: 10px;
		}




		/* ====== í˜ì´ì§€ë„¤ì´ì…˜ ====== */
		.pagination {
			text-align: center;
			margin-top: 30px;
			margin-bottom: 80px;
		}

		.pagination a {
			display: inline-block;
			margin: 0 5px;
			padding: 6px 12px;
			border: 1px solid #ccc;
			border-radius: 4px;
			color: #333;
			text-decoration: none;
			transition: all 0.2s;
		}

		.pagination a:hover {
			background-color: #f0f0f0;
		}

		.pagination a.active {
			background-color: #8b5e3c;
			color: white;
			font-weight: bold;
			border-color: #8b5e3c;
		}

		/* ìˆ¨ê¹€ í´ë˜ìŠ¤ */
		.hidden {
			display: none !important;
		}
	</style>
</head>

<body>
	<!-- í—¤ë” -->
	<div th:replace="~{header :: siteHeader}"></div>

	<!-- ì»¨í…Œì´ë„ˆ -->
	<div class="container-all">
		<!-- ìœ—ë‹¨ ì•„ì´ì½˜ -->
		<div class="board-header">
			<h1>ë°˜ë ¤ë™ë¬¼ ìë‘ </h1>
			<p>ì´ ê²Œì‹œê¸€ ìˆ˜: <span th:text="${totalCount}">0</span></p>
		</div>

		<!-- ìœ—ë‹¨ ì „ì²´ wrapper -->
		<div class="action-row">
			<!-- ê²€ìƒ‰ wrapper-->
			<div class="center-section">
				<div class="search-button">
					<form th:action="@{/AnimalPride}" method="get" class="search-box">
						<select name="field" class="search-select" th:value="${field}">
							<option value="title" th:selected="${field == 'title'}">ì œëª©</option>
							<option value="content" th:selected="${field == 'content'}">ë‚´ìš©</option>
							<option value="nickname" th:selected="${field == 'nickname'}">ì‘ì„±ì</option>
							<option value="" th:selected="${field == ''}">í†µí•© ê²€ìƒ‰</option>
						</select>
						<input type="text" name="keyword" class="search-input" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
							th:value="${keyword}" />
						<button type="submit" class="btn-search">ê²€ìƒ‰</button>
					</form>
				</div>
			</div>

			<!-- ì˜¤ë¥¸ìª½ ë²„íŠ¼ wrapper -->
			<div class="right-section">
				<!-- ë³´ê¸°í˜•ì‹ ìŠ¤ìœ„ì¹˜ -->
				<div class="toggle-switch">
					<input type="radio" id="viewCard" name="viewType" value="card" th:checked="${viewType == 'card'}" />
					<label for="viewCard">ì¹´ë“œí˜•</label>
					<input type="radio" id="viewList" name="viewType" value="list" th:checked="${viewType == 'list'}" />
					<label for="viewList">ë¦¬ìŠ¤íŠ¸í˜•</label>
				</div>
				<!-- ê¸€ ë“±ë¡ ë²„íŠ¼ -->
				<p class="regist-button">
					<a th:href="@{/AnimalPrideRegist}" class="btn-primary">ìƒˆ ê¸€ ë“±ë¡í•˜ê¸°</a>
				</p>
			</div>
		</div>

		<!-- í•œì¤„ ë²„íŠ¼ wrapper-->
		<div class="popular-section">
			<!-- ì ‘ê¸°/í¼ì¹˜ê¸° ë²„íŠ¼ -->
			<button id="togglePopularBtn" onclick="togglePopular()">
				ğŸ‘ï¸ ì¸ê¸°ê¸€ ì ‘ê¸°
			</button>
		</div>

		<!--------------------------------------------------------------------------------------------------------------------------->

		<!-- ì¸ê¸°ê¸€ íƒ€ì´í‹€ ì¡°ì •ìš© wrapper -->
		<div class="main-wrapper">
			<!-- ì¸ê¸°ê¸€ íƒ€ì´í‹€ -->
			<div class="popular-header" style="display:flex; justify-content:space-between; align-items:center;">
				<h3>ğŸ”¥ ì¸ê¸°ê¸€</h3>
			</div>
			<!-- ì¸ê¸°ê¸€  -->
			<div id="popularContent" class="here"
				style="visibility: visible; height: auto; overflow: hidden; transition: all 0.3s;">
				<div th:each="post, iterStat : ${popularPosts}" th:if="${iterStat.index < 8}" class="card-popular">
					<a th:href="@{'/AnimalPrideDetail/{num}'(num=${post.boardNum})}" class="link-title">
						<strong th:text="|${post.title} ğŸ’¬(${post.commentCount})|">ì œëª©</strong>
					</a>
					<a th:href="@{'/AnimalPrideDetail/{num}'(num=${post.boardNum})}">
						<img class="thumb-image"
							th:src="@{${post.Image_paths != null} ? ${post.Image_paths} : '/imagesDefault/defaultBoard.png'}">
					</a>
					<span th:text="'ì‘ì„±ì: ' + ${post.nickName}">ì‘ì„±ì</span>
					<span th:text="'ì¡°íšŒìˆ˜: ' + ${post.views}">ì¡°íšŒìˆ˜</span>
					<span th:text="'ì¢‹ì•„ìš”: ' + ${post.likes}">ì¢‹ì•„ìš”</span>
					<span th:text="'ì‘ì„±ì¼: ' + ${post.formattedRegistDate}">ì‘ì„±ì¼</span>
					<hr>
				</div>
			</div>
		</div>

		<!--------------------------------------------------------------------------------------------------------------------------->

		<div class="main-container">
			<!-- ì „ì²´ ê¸€-->
			<div class="main-title">
				<h3>ğŸ“‹ì „ì²´ ê¸€</h3>
			</div>
			<!-- ì¹´ë“œí˜• (mainList ë°˜ë³µ) -->
			<div class="card-list-view">
				<div class="card-popular" th:each="board, iterStat : ${mainList}">
					<a th:href="@{'/AnimalPrideDetail/{num}'(num=${board.boardNum})}" class="link-title">
						<strong th:text="${board.title + ' ğŸ’¬(' + board.commentCount + ')'}">ì œëª©</strong>
					</a>
					<a th:href="@{'/AnimalPrideDetail/{num}'(num=${board.boardNum})}">
						<img class="thumb-image" th:src="${board.Image_paths}" alt="ì¸ë„¤ì¼" />
					</a>
					<span th:text="'ì‘ì„±ì: ' + ${board.nickName}">ì‘ì„±ì</span>
					<span th:text="'ì¡°íšŒìˆ˜: ' + ${board.views}">ì¡°íšŒìˆ˜</span>
					<span th:text="'ì¢‹ì•„ìš”: ' + ${board.likes}">ì¢‹ì•„ìš”</span>
					<span th:text="'ì‘ì„±ì¼: ' + ${board.formattedRegistDate}">ì‘ì„±ì¼</span>
					<hr />
				</div>
				<div th:if="${#lists.isEmpty(mainList)}">ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</div>
			</div>


			<!-- ë¦¬ìŠ¤íŠ¸í˜• (ê¸°ì¡´ í…Œì´ë¸”) -->
			<table class="table-posts">
				<colgroup>
					<col style="width: 5%;" />
					<col style="width: 10%;" />
					<col style="width: 43%;" />
					<col style="width: 6%;" />
					<col style="width: 6%;" />
					<col style="width: 10%;" />
				</colgroup>
				<thead>
					<tr>
						<th>ë²ˆí˜¸</th>
						<th>ì‘ì„±ì</th>
						<th>ì œëª©</th>
						<th>ì¡°íšŒìˆ˜</th>
						<th>ì¢‹ì•„ìš”</th>
						<th>ì‘ì„±ì¼</th>
					</tr>
				</thead>

				<!-- ë³¸ë¬¸ ì½”ë“œ -->
				<tbody>
					<tr th:each="board, iterStat : ${mainList}">
						<td th:text="${board.boardNum}">1</td>
						<!-- ì¸ë„¬ ë³´ì´ê²Œ-->

						<td th:text="${board.nickName}"></td>
						<td>
							<a th:href="@{'/AnimalPrideDetail/{num}'(num=${board.boardNum})}" class="link-title"
								th:text="${board.title + 'ğŸ—¨ï¸(' + board.commentCount + ')'}">ì œëª©</a>
						</td>
						<td th:text="${board.views}"></td>
						<td th:text="${board.likes}"></td>
						<td th:text="${board.formattedRegistDate}"></td>
					</tr>
					<tr th:if="${#lists.isEmpty(mainList)}">
						<td colspan="9">ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<!--------------------------------------------------------------------------------------------------------------------------->

	<!-- í˜ì´ì§€ ë„¤ì´ì…˜-->
	<div class="pagination">
		<!-- ì´ì „ í˜ì´ì§€ -->
		<a class="pagination-link" th:if="${currentPage > 1}"
			th:href="@{/AnimalPride(page=${currentPage - 1}, keyword=${keyword}, field=${field}, viewType=${viewType})}">
			â—€ ì´ì „
		</a>

		<!-- ìˆ«ì í˜ì´ì§€ -->
		<span th:each="pageNum : ${#numbers.sequence(1, totalPages)}">
			<a class="pagination-link"
				th:href="@{/AnimalPride(page=${pageNum}, keyword=${keyword}, field=${field}, viewType=${viewType})}"
				th:text="${pageNum}" th:classappend="${pageNum == currentPage} ? 'active'">
			</a>
		</span>

		<!-- ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ -->
		<a th:if="${currentPage < totalPages}"
			th:href="@{/AnimalPride(page=${currentPage + 1}, keyword=${keyword}, field=${field}, viewType=${viewType})}">
			ë‹¤ìŒ â–¶
		</a>
	</div>

	</div>

	<script>
		function togglePopular() {
			const section = document.getElementById('popularContent');
			const button = document.getElementById('togglePopularBtn');

			// í˜„ì¬ ìƒíƒœ í™•ì¸
			const isHidden = section.style.visibility === 'hidden';

			if (isHidden) {
				// í¼ì¹˜ê¸°
				section.style.visibility = 'visible';
				section.style.height = 'auto';
				button.innerText = 'ğŸ‘ï¸ ì¸ê¸°ê¸€ ì ‘ê¸°';
				sessionStorage.setItem('popularCollapsed', 'false'); // ìƒíƒœ ì €ì¥
			} else {
				// ì ‘ê¸°
				section.style.visibility = 'hidden';
				section.style.height = '0px';
				button.innerText = 'ğŸ‘ï¸ ì¸ê¸°ê¸€ í¼ì¹˜ê¸°';
				sessionStorage.setItem('popularCollapsed', 'true'); // ìƒíƒœ ì €ì¥
			}
		}

		// í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ ë³µì›
		window.addEventListener('DOMContentLoaded', () => {
			const section = document.getElementById('popularContent');
			const button = document.getElementById('togglePopularBtn');
			const collapsed = sessionStorage.getItem('popularCollapsed');

			if (collapsed === 'true') {
				// ì ‘íŒ ìƒíƒœë¡œ ë³µì›
				section.style.visibility = 'hidden';
				section.style.height = '0px';
				button.innerText = 'ğŸ‘ï¸ ì¸ê¸°ê¸€ í¼ì¹˜ê¸°';
			} else {
				// í¼ì¹œ ìƒíƒœë¡œ ë³µì›
				section.style.visibility = 'visible';
				section.style.height = 'auto';
				button.innerText = 'ğŸ‘ï¸ ì¸ê¸°ê¸€ ì ‘ê¸°';
			}
		});


		// í˜ì´ì§€ ë¡œë“œ ì‹œ, URLì—ì„œ viewType íŒŒë¼ë¯¸í„° ì½ì–´ì„œ ë¼ë””ì˜¤ ì²´í¬ì™€ í™”ë©´ í‘œì‹œ ê²°ì •
		function getQueryParam(param) {
			const urlParams = new URLSearchParams(window.location.search);
			return urlParams.get(param);
		}

		function setViewType(viewType) {
			const cardView = document.querySelector('.card-list-view');
			const listView = document.querySelector('.table-posts');
			const radios = document.querySelectorAll('input[name="viewType"]');

			if (viewType === 'list') {
				cardView.classList.add('hidden');
				listView.classList.remove('hidden');
				radios.forEach(r => r.checked = (r.value === 'list'));
			} else {
				cardView.classList.remove('hidden');
				listView.classList.add('hidden');
				radios.forEach(r => r.checked = (r.value === 'card'));
			}
		}

		window.addEventListener('DOMContentLoaded', () => {
			const serverViewType = document.querySelector('input[name="viewType"]:checked')?.value;
			console.log("ì„œë²„ì—ì„œ ì²´í¬ëœ ë¼ë””ì˜¤ ê°’:", serverViewType);

			let viewType = serverViewType || getQueryParam('viewType') || 'card';
			console.log("ìµœì¢… ì„ íƒëœ viewType:", viewType);

			setViewType(viewType);

			// ë¼ë””ì˜¤ ë³€ê²½ ì‹œ, í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ë©´ì„œ viewType íŒŒë¼ë¯¸í„° ìœ ì§€
			document.querySelectorAll('input[name="viewType"]').forEach(radio => {
				radio.addEventListener('change', (e) => {
					const params = new URLSearchParams(window.location.search);
					params.set('viewType', e.target.value);
					// ë‹¤ë¥¸ ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ìœ ì§€í•œ ì±„ë¡œ ìƒˆë¡œê³ ì¹¨
					window.location.search = params.toString();
				});
			});
		});
	</script>

</body>

</html>