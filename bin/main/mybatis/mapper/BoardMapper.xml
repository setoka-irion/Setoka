<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.practice.setoka.mapper.BoardMapper">
	
	<!-- 모든 목록-->
	<select id="AllList" resultType="com.practice.setoka.dao.Board">
    	SELECT * FROM board
  	</select>

    <!-- 글 등록 -->
    <insert id="regist" parameterType="com.practice.setoka.dao.Board">
        INSERT INTO board (title, content, view_count, created_at)
        VALUES (#{title}, #{content}, 0, NOW())
    </insert>
    
    <!-- 글 수정-->
    
    
    <!--글 삭제 -->
    
    
    
     <!-- 조회수 증가 -->
    <update id="updateViewCount" parameterType="int">
        UPDATE board SET view_count = view_count + 1 WHERE id = #{id}
    </update>
    
	<!-- 아이디로 검색 -->
    <select id="listById" parameterType="int" resultType="com.practice.setoka.dao.Board">
        SELECT * FROM board WHERE id = #{id}
    </select>
    
    <!-- 제목으로 검색 -->
    <select id="listById" parameterType="int" resultType="com.practice.setoka.dao.Board">
        SELECT * FROM board WHERE id = #{id}
    </select>
    
    <!-- 내용으로 검색 -->
    <select id="listById" parameterType="int" resultType="com.practice.setoka.dao.Board">
        SELECT * FROM board WHERE id = #{id}
    </select>
    
    <select id="selectIdOne" resultMap="boardUserIdMap">
		SELECT b.board_id, b.user_id,
		u.id, b.board_title, b.board, b.regist_date, b.state
		FROM board b JOIN
		users u ON b.user_id = u.user_id WHERE b.board_id =
		#{boardId};
	</select>
    
</mapper>